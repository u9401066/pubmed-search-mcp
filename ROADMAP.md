# PubMed Search MCP - Roadmap

## é¡˜æ™¯

**ä½¿å‘½**ï¼šæˆç‚º AI Agent çš„å°ˆæ¥­æ–‡ç»ç ”ç©¶åŠ©ç†ï¼Œè€Œéå–®ç´”çš„ API åŒ…è£å™¨ã€‚

**è¨­è¨ˆå“²å­¸**ï¼š
- **Domain-Driven Design (DDD)** - ä»¥æ–‡ç»ç ”ç©¶é ˜åŸŸç‚ºæ ¸å¿ƒå»ºæ¨¡
- **ä»»å‹™å°å‘** - Tool è¨­è¨ˆä»¥ç ”ç©¶ä»»å‹™ç‚ºå–®ä½ï¼Œè€Œé API åŠŸèƒ½
- **Agent-First** - è¼¸å‡ºæ ¼å¼å„ªåŒ–ç‚º Agent æ±ºç­–ï¼Œè€Œéäººé¡é–±è®€

---

## æ¶æ§‹è¨­è¨ˆ (DDD)

### é ˜åŸŸæ¨¡å‹ (Domain Model)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Research Session (èšåˆæ ¹)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   Topic     â”‚  â”‚  Search     â”‚  â”‚  Reading    â”‚          â”‚
â”‚  â”‚   Context   â”‚  â”‚  History    â”‚  â”‚  List       â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚              Article Collection                  â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚        â”‚
â”‚  â”‚  â”‚ Article â”‚  â”‚ Article â”‚  â”‚ Article â”‚  ...    â”‚        â”‚
â”‚  â”‚  â”‚ (PMID)  â”‚  â”‚ (PMID)  â”‚  â”‚ (PMID)  â”‚         â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é™ç•Œä¸Šä¸‹æ–‡ (Bounded Contexts)

| Context | è·è²¬ | æ ¸å¿ƒå¯¦é«” |
|---------|------|----------|
| **Discovery** | æ¢ç´¢èˆ‡æœå°‹æ–‡ç» | Query, SearchResult |
| **Analysis** | åˆ†ææ–‡ç»å…§å®¹èˆ‡é—œä¿‚ | Article, CitationNetwork |

> **è¨­è¨ˆæ±ºç­–**: Curation/Export ä¸åœ¨æœ¬å°ˆæ¡ˆç¯„åœã€‚å°ˆæ³¨åšå¥½æœå°‹ï¼Œå…¶ä»–åŠŸèƒ½ç”±å…¶ä»– MCP server è™•ç†ã€‚

---

## MCP å…ƒä»¶è¨­è¨ˆ

### ç¾æœ‰ Tools (7 å€‹æœå°‹å·¥å…·)

| Tool | ä»»å‹™ | èªªæ˜ |
|------|------|------|
| `search_literature` | åŸºæœ¬æœå°‹ | PubMed æ–‡ç»æœå°‹ï¼Œæ”¯æ´æ—¥æœŸ/é¡å‹ç¯©é¸ |
| `find_related_articles` | æ¢ç´¢ç›¸é—œ | æ‰¾ç›¸ä¼¼ä¸»é¡Œæ–‡ç«  |
| `find_citing_articles` | è¿½è¹¤å¼•ç”¨ | æ‰¾å¾ŒçºŒç ”ç©¶ |
| `fetch_article_details` | å–å¾—è©³æƒ… | å–å¾—å®Œæ•´æ–‡ç« è³‡è¨Š |
| `generate_search_queries` | æ‰¹æ¬¡ç­–ç•¥ | ç”¢ç”Ÿå¤šè§’åº¦æœå°‹ query |
| `merge_search_results` | åˆä½µçµæœ | å»é‡ + æ¨™è¨˜é«˜ç›¸é—œæ€§ |
| `expand_search_queries` | æ“´å±•ç­–ç•¥ | åŒç¾©è©/ç›¸é—œæ¦‚å¿µæ“´å±• |

### å…§éƒ¨æ©Ÿåˆ¶ (å° Agent é€æ˜)

| æ©Ÿåˆ¶ | èªªæ˜ |
|------|------|
| Session | è‡ªå‹•å»ºç«‹ã€è‡ªå‹•åˆ‡æ› |
| Cache | æœå°‹çµæœè‡ªå‹•å¿«å–ï¼Œé¿å…é‡è¤‡ API |
| Reading List | å…§éƒ¨è¿½è¹¤ (æœªä¾†ç”¨æ–¼æ™ºæ…§æ¨è–¦) |

### æœªä¾† Tools (è¦åŠƒä¸­)

#### é€²éšåˆ†æ
| Tool | ä»»å‹™ |
|------|------|
| `trace_lineage` | è¿½è¹¤ç ”ç©¶è„ˆçµ¡ (å¼•ç”¨ç¶²çµ¡) |
| `compare_studies` | æ¯”è¼ƒå¤šç¯‡ç ”ç©¶ |
| `find_consensus` | æ‰¾å‡ºé ˜åŸŸå…±è­˜èˆ‡çˆ­è­° |

### Resources (ç‹€æ…‹æŸ¥è©¢)

```python
# å…§éƒ¨ä½¿ç”¨ï¼ŒAgent ç„¡éœ€ä¸»å‹•æŸ¥è©¢
session://context          # ç•¶å‰ç ”ç©¶ä¸Šä¸‹æ–‡ (for debugging)
```

---

## è¼¸å‡ºæ ¼å¼è¨­è¨ˆ (Agent-Optimized)

### åŸå‰‡
1. **çµæ§‹åŒ– JSON** - ä¾¿æ–¼ Agent è§£æ
2. **åŒ…å«æ´å¯Ÿ** - ä¸åªæ˜¯è³‡æ–™ï¼Œé‚„æœ‰åˆ†æ
3. **å»ºè­°ä¸‹ä¸€æ­¥** - å¹«åŠ© Agent æ±ºç­–

### ç¯„ä¾‹è¼¸å‡º

```json
{
  "task": "explore_topic",
  "topic": "remimazolam ICU sedation",
  "results": {
    "articles_found": 45,
    "top_articles": [...],
    "time_distribution": {
      "2020-2022": 12,
      "2023-2024": 28,
      "2025": 5
    }
  },
  "insights": {
    "research_trend": "å¿«é€Ÿå¢é•·ï¼Œ2023å¹´å¾Œç ”ç©¶é‡å€å¢",
    "dominant_study_types": ["RCT", "è§€å¯Ÿæ€§ç ”ç©¶"],
    "geographic_focus": ["ä¸­åœ‹", "æ—¥æœ¬", "å¾·åœ‹"],
    "knowledge_gaps": [
      "ç¼ºä¹å…’ç§‘æ—ç¾¤ç ”ç©¶",
      "é•·æœŸä½¿ç”¨å®‰å…¨æ€§è³‡æ–™ä¸è¶³"
    ]
  },
  "suggested_actions": [
    {
      "action": "trace_lineage",
      "target": "PMID:12345678",
      "reason": "é«˜å¼•ç”¨è«–æ–‡ï¼Œå¯èƒ½æ˜¯é ˜åŸŸå¥ åŸºç ”ç©¶"
    },
    {
      "action": "deep_search",
      "params": {"filter": "RCT"},
      "reason": "å¦‚éœ€é«˜å“è³ªè­‰æ“šï¼Œå»ºè­°ç¯©é¸ RCT"
    }
  ],
  "session_updated": true
}
```

---

## å¯¦ä½œè·¯ç·šåœ–

### Phase 1: åŸºç¤ç©©å®š âœ… (å·²å®Œæˆ)
- [x] åŸºæœ¬ PubMed æœå°‹
- [x] MCP Server (stdio + HTTP/SSE)
- [x] é ç«¯éƒ¨ç½²æ”¯æ´
- [x] éŒ¯èª¤é‡è©¦æ©Ÿåˆ¶

### Phase 2: Session & Cache âœ… (å·²å®Œæˆ)
- [x] å®šç¾©é ˜åŸŸæ¨¡å‹ (Domain Model)
- [x] å¯¦ä½œ Research Session èšåˆæ ¹ (`session.py`)
- [x] æ–‡ç« å¿«å–ç³»çµ± (é¿å…é‡è¤‡ API å‘¼å«)
- [x] Session æŒä¹…åŒ– (JSON æª”æ¡ˆ)
- [x] **é‡æ§‹**: Session/Cache/ReadingList æ”¹ç‚ºå…§éƒ¨æ©Ÿåˆ¶
- [x] **ç²¾ç°¡**: åƒ…ä¿ç•™ 7 å€‹æœå°‹å·¥å…·

### Phase 3: Agent å„ªåŒ– ğŸ¯ (ä¸‹ä¸€æ­¥)
- [ ] çµæ§‹åŒ–è¼¸å‡ºæ ¼å¼
- [ ] æ™ºæ…§æ´å¯Ÿç”Ÿæˆ
- [ ] å»ºè­°è¡Œå‹•ç³»çµ±

### Phase 4: é€²éšåˆ†æ
- [ ] å¼•ç”¨ç¶²çµ¡åˆ†æ (`trace_lineage`)
- [ ] ç ”ç©¶æ¯”è¼ƒ (`compare_studies`)
- [ ] å…±è­˜èˆ‡çˆ­è­°åˆ†æ (`find_consensus`)

### Phase 5: æ•´åˆæ“´å±•
- [ ] å¤šè³‡æ–™åº«æ”¯æ´ (Cochrane, ClinicalTrials.gov)
- [ ] Unpaywall / PMC å…¨æ–‡å­˜å–

---

## è¨­è¨ˆæ±ºç­–è¨˜éŒ„

| æ—¥æœŸ | æ±ºç­– | ç†ç”± |
|------|------|------|
| 2024-12-03 | æ¡ç”¨ DDD æ¶æ§‹ | æ›´å¥½åœ°åæ˜ æ–‡ç»ç ”ç©¶é ˜åŸŸçŸ¥è­˜ |
| 2024-12-03 | çµæ§‹åŒ– JSON è¼¸å‡º | å„ªåŒ– Agent æ±ºç­–æ•ˆç‡ |
| 2024-12-03 | Session/Cache å…§éƒ¨åŒ– | Agent ä¸éœ€ç®¡ç†åŸºç¤è¨­æ–½ï¼Œå°ˆæ³¨æœå°‹ä»»å‹™ |
| 2024-12-03 | ç§»é™¤ Curation å·¥å…· | å°ˆæ³¨åšå¥½æœå°‹ï¼Œæ–‡ç»ç®¡ç†ç”±å…¶ä»–å·¥å…·è™•ç† |
| 2024-12-03 | 7 å€‹ç²¾ç°¡å·¥å…· | æ¸›å°‘ Agent èªçŸ¥è² æ“”ï¼Œå·¥å…·è·è²¬æ˜ç¢º |

---

## è²¢ç»æŒ‡å—

æ­¡è¿è²¢ç»ï¼ç›®å‰å„ªå…ˆéœ€è¦ï¼š
1. Phase 2 çš„ DDD é‡æ§‹
2. Resources ç‹€æ…‹ç®¡ç†å¯¦ä½œ
3. æ¸¬è©¦æ¡ˆä¾‹

è«‹åƒè€ƒ [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£å¦‚ä½•è²¢ç»ã€‚
